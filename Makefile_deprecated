CC = g++
CFLAGS = -std=c++11 -Wall

all: proxy

csapp.o: csapp.c
	gcc -Wall -c csapp.c

BlockingQueue.o: BlockingQueue.cpp
	$(CC) $(CFLAGS) -c BlockingQueue.cpp

Task.o: Task.cpp
	$(CC) $(CFLAGS) -c Task.cpp

ThreadPool.o: ThreadPool.cpp
	$(CC) $(CFLAGS) -c ThreadPool.cpp

Socket.o: Socket.cpp
	$(CC) $(CFLAGS) -c Socket.cpp

SocketBuilder.o: SocketBuilder.cpp
	$(CC) $(CFLAGS) -c SocketBuilder.cpp

BlindForwarder.o: BlindForwarder.cpp
	$(CC) $(CFLAGS) -c BlindForwarder.cpp

HttpRequest.o: HttpRequest.cpp
	$(CC) $(CFLAGS) -c HttpRequest.cpp

HttpResponse.o: HttpResponse.cpp
	$(CC) $(CFLAGS) -c HttpResponse.cpp

proxy.o: proxy.cpp
	$(CC) $(CFLAGS) -c proxy.cpp

proxy: proxy.o HttpResponse.o HttpRequest.o BlindForwarder.o SocketBuilder.o Socket.o ThreadPool.o Task.o BlockingQueue.o csapp.o
	$(CC) $(CFLAGS) proxy.o HttpResponse.o HttpRequest.o BlindForwarder.o SocketBuilder.o Socket.o ThreadPool.o Task.o BlockingQueue.o csapp.o -o proxy

clean:
	rm -f *~ *.o proxy
